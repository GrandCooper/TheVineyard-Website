<!DOCTYPE html>
<html>
  <head>
    <title>RottenSwap Memes</title>
      <style>
        body {
          margin: 0
        }
        p {
          display: block; 
          max-width: 600px; 
          margin: auto;
          word-break: break-all; 
          text-align: center;
          padding: 8px;
        }
        img, video {
          display: block; 
          max-width: 600px; 
          margin: auto;
        }
        @media (max-width: 600px) {
          img, video {
            max-width: 95vw; 
          }
        }
      </style>
  </head>
  <body>
    <script>
      (async () => {
        const response = await fetch('https://api.github.com/repos/rottenswap/rottenswap.org-website/contents/docs/memes')
        const data = await response.json();
        const message = document.createElement('p')
        message.innerHTML = 'Add memes to <a href="https://drive.google.com/drive/folders/1nJ4J7alKEK7EWOxn13jCmVTONOkUHfhq">https://drive.google.com/drive/folders/1nJ4J7alKEK7EWOxn13jCmVTONOkUHfhq</a>'
        document.body.appendChild(message)

        for (let file of data) {
          if (file.name.match(/(html|htm)$/i) || file.name.startsWith('.')) {
            continue
          }
          let meme
          if (file.name.match(/(mov|mp4|webm)$/i)) {
            meme = document.createElement('video')
            meme.muted = true
            meme.autoplay = true
            meme.loop = true
            meme.controls = true
          }
          else {
            meme = document.createElement('img')
          }
          meme.src = `https://rottenswap.org/memes/${file.name}`
          document.body.appendChild(meme)
        }
      })()
    </script>
  <body>
</html>
